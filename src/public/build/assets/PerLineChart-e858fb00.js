import{r as s,j as X,a as o}from"./app-33e0e813.js";import H from"./ChartPager-0ff13e40.js";import{C as v,g as Y,A as q,a as G,L as J,B as K,P as M,b as O,c as Q,D as U,d as Z,e as ee,f as te,R as ae,S as le,h as re,i as oe,j as se,k as ne,T as ce,l as ie,p as he,m as de,n as ge,o as ue,q as me,r as fe}from"./AnalyticsBar-62a31e14.js";import"./ResolutionDropdown-498d0d0b.js";import{C as Ce,R as C}from"./Row-fb1f9ce4.js";import{C as w}from"./Col-c3c577e8.js";/* empty css            */import"./Button-95edad04.js";v.register(G,J,K,M,O,Q,U,Z,ee,te,ae,le,re,oe,se,ne,ce,ie,he,de,ge,ue,me,fe);function De(l){s.useState(null);const[g,u]=s.useState(l.pageNo),[m,x]=s.useState(parseInt(l.thePageSetNumber)),[A,be]=s.useState(l.thePageSize),[L,pe]=s.useState(l.thePagingArray),[T,ye]=s.useState(l.theChartArray),[b,I]=s.useState(l.chartData);s.useState(l.theVotes);const[F,Se]=s.useState(l.parse_resolution);s.useEffect(()=>{console.log("Parse Resolution",F),console.log("Chart Data:",b);let t=document.getElementById("myChart").getContext("2d");$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+g).css("background-color","#ffc107");let e=l.type,r=E(b,g),c=r.labels,h=r.datasets;const d=new v(t,{type:e,data:{labels:c,datasets:h},options:{events:["mousemove","mouseout","click","touchstart","touchmove"],plugins:{tooltip:{events:["click"],position:"average",enabled:!0,interaction:{mode:"index",axis:"xy",intersect:"false"},titleFont:{size:35},bodyFont:{size:30},footerFont:{size:30}}},onHover:a=>{const n=Y(a),p=a.chart.scales.x.getValueForPixel(n.x),i=a.chart.scales.y.getValueForPixel(n.y);console.log("Data X",p),console.log("Data Y",i),console.log("Event",a),console.log("Active Elements: ",a.chart.tooltip.getActiveElements());let D=a.chart.chartArea.right-a.chart.chartArea.left;console.log("Chart start: ",a.chart.chartArea.left),console.log("Chart Width: ",D),console.log("Chart end: ",a.chart.chartArea.right);let B=parseFloat(a.chart.chartArea.right),f=parseFloat(a.chart.chartArea.left),P=(B-f)/11;console.log("Element width: ",P),console.log("Click X position: ",a.x);let y=0,S=parseFloat(a.chart.chartArea.left);for(;S<=a.chart.chartArea.right;){if(S<=a.x&&a.x<S+P){y++;break}S+=P,y++}console.log("Selected Index: ",y);let R=[],_;a.chart.data.datasets.map((xe,W)=>{_={datasetIndex:W,index:y-1},R.push(_)}),console.log("Active Elements Array: ",R),a.chart.tooltip.setActiveElements(R,{x:p,y:i}),a.chart.update()}}});return()=>{d.destroy()}},[]),s.useEffect(()=>{$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+g).css("background-color","#ffc107")},[g]),s.useEffect(()=>{function t(){console.log("new chart data: ",l.chartData),I(l.chartData);let e;g===1?(e=1,u(e)):(e=g-1,u(e)),k(e,l.chartData)}console.log("new parse res: ",l.parse_resolution),t()},[l.chartData]);const V=t=>{console.log("page num: ",t.num);let e=t.num;u(e),k(e,null)},z=t=>{console.log(t);let e=t.num;t.nxpagenum,t.type;let r=parseInt(m)*parseInt(A);console.log("highest page:",r),e>r&&(x(m+1),u(e))},j=t=>{console.log(t);let e=t.num,c=parseInt(m-1)*A+1;console.log("Lowest Page:",c),e!=0&&e<c?(x(m-1),u(e)):e==0&&c<=1&&(x(m),u(1))},E=(t,e,r,c)=>{if(e-1<t.perRemainingBidenStore.length)return N(e-1,t);{let h=t.perRemainingBidenStore.length-1;return N(h,t)}},N=(t,e)=>{let r=["red","orange","yellow","lime","green","teal","blue","purple"],c=e.dateHeadersStore,h=e.perRemainingBidenStore,d=e.perRemainingTrumpStore,a=c[t];var n={};n.label="Biden % of Remaining Vote",n.backgroundColor=r[0],n.borderColor=r[0],n.data=[],h[t].map(f=>{n.data.push(f)});let p=n;var i={};return i.label="Trump % of Remaining Vote",i.backgroundColor=r[1],i.borderColor=r[1],i.data=[],d[t].map(f=>{i.data.push(f)}),{labels:a,datasets:[p,i]}},k=(t,e=null)=>{e===null&&(e=b),console.log("entering updateChart with page no: ",t),document.getElementById("myChart").getContext("2d"),$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+t).css("background-color","#ffc107"),l.type;let r=E(e,t),c=r.labels,h=r.datasets,d=v.getChart("myChart");d.data.labels=c,h.forEach((a,n)=>{d.data.datasets[n].data=a.data}),d.update()};return X(Ce,{className:"chart-viewer",children:[o(C,{children:o(w,{className:"w-100 d-flex justify-content-center",children:o("h3",{children:l.selectedState})})}),o(C,{children:o(w,{className:"w-100 d-flex justify-content-center",children:o("h4",{children:"Percentage of Remaining Votes Chart"})})}),o(q,{handleCloseChart:l.handleCloseChart,...l,theResolutions:l.theResolutions,selectResolution:l.selectResolution,selectAnalytics:l.selectAnalytics,chartData:l.chartData,chartType:"PerLineChart"}),o(C,{children:o(w,{className:"w-100 d-flex justify-content-center",children:o("h4",{children:"% of Remaining Votes"})})}),o(C,{className:"d-flex justify-content-center",children:o("div",{children:o("canvas",{id:"myChart"})})}),o(C,{className:"h-100 p-1 mt-3 d-flex justify-content-center",children:o(H,{getPageNumber:V,type:"line",leftArrow:j,rightArrow:z,pageNo:g,thePagingArray:L,thePageSetNumber:m,chartData:b,thePageSize:A,theChartArray:T})})]})}export{De as default};
