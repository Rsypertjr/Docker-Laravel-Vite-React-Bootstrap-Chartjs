import{r as o,j as X,a as s}from"./app-d3013fbc.js";import G from"./ChartPager-13df2cce.js";import{C as v,g as H,A as Y,a as q,L as J,B as K,P as M,b as O,c as Q,D as U,d as Z,e as ee,f as te,R as ae,S as le,h as re,i as se,j as oe,k as ne,T as ce,l as ie,p as de,m as he,n as ge,o as ue,q as me,r as fe}from"./AnalyticsBar-7101e15f.js";import"./ResolutionDropdown-2d80e47b.js";import{C as Ce,R as C}from"./Row-50e19a91.js";import{C as w}from"./Col-2e73e1de.js";import"./Button-24cd0bf7.js";v.register(q,J,K,M,O,Q,U,Z,ee,te,ae,le,re,se,oe,ne,ce,ie,de,he,ge,ue,me,fe);function _e(l){o.useState(null);const[g,u]=o.useState(l.pageNo),[m,S]=o.useState(parseInt(l.thePageSetNumber)),[x,be]=o.useState(l.thePageSize),[B,ye]=o.useState(l.thePagingArray),[I,pe]=o.useState(l.theChartArray),[b,T]=o.useState(l.chartData);o.useState(l.theVotes);const[F,Ae]=o.useState(l.parse_resolution);o.useEffect(()=>{console.log("Parse Resolution",F),console.log("Chart Data:",b);let t=document.getElementById("myChart").getContext("2d");$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+g).css("background-color","#ffc107");let e=l.type,r=E(b,g),c=r.labels,d=r.datasets;const h=new v(t,{type:e,data:{labels:c,datasets:d},options:{events:["mousemove","mouseout","click","touchstart","touchmove"],plugins:{tooltip:{events:["click"],position:"average",enabled:!0,interaction:{mode:"index",axis:"xy",intersect:"false"},titleFont:{size:35},bodyFont:{size:30},footerFont:{size:30}}},onHover:a=>{const n=H(a),y=a.chart.scales.x.getValueForPixel(n.x),i=a.chart.scales.y.getValueForPixel(n.y);console.log("Data X",y),console.log("Data Y",i),console.log("Event",a),console.log("Active Elements: ",a.chart.tooltip.getActiveElements());let R=a.chart.chartArea.right-a.chart.chartArea.left;console.log("Chart start: ",a.chart.chartArea.left),console.log("Chart Width: ",R),console.log("Chart end: ",a.chart.chartArea.right);let k=parseFloat(a.chart.chartArea.right),f=parseFloat(a.chart.chartArea.left),D=(k-f)/11;console.log("Element width: ",D),console.log("Click X position: ",a.x);let p=0,A=parseFloat(a.chart.chartArea.left);for(;A<=a.chart.chartArea.right;){if(A<=a.x&&a.x<A+D){p++;break}A+=D,p++}console.log("Selected Index: ",p);let P=[],L;a.chart.data.datasets.map((Se,W)=>{L={datasetIndex:W,index:p-1},P.push(L)}),console.log("Active Elements Array: ",P),a.chart.tooltip.setActiveElements(P,{x:y,y:i}),a.chart.update()}}});return()=>{h.destroy()}},[]);const E=(t,e,r,c)=>{if(e-1<t.dateDataBidenAddDiffStore.length)return N(e-1,t);{let d=t.dateDataBidenAddDiffStore.length-1;return N(d,t)}};o.useEffect(()=>{$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+g).css("background-color","#ffc107")},[g]),o.useEffect(()=>{function t(){console.log("new chart data: ",l.chartData),T(l.chartData);let e;g===1?(e=1,u(e)):(e=g-1,u(e)),_(e,l.chartData)}console.log("new parse res: ",l.parse_resolution),t()},[l.chartData]);const z=t=>{console.log("page num: ",t.num);let e=t.num;u(e),_(e,null)},j=t=>{console.log(t);let e=t.num;t.nxpagenum,t.type;let r=parseInt(m)*parseInt(x);console.log("highest page:",r),e>r&&(S(m+1),u(e))},V=t=>{console.log(t);let e=t.num,c=parseInt(m-1)*x+1;console.log("Lowest Page:",c),e!=0&&e<c?(S(m-1),u(e)):e==0&&c<=1&&(S(m),u(1))},N=(t,e)=>{let r=["red","orange","yellow","lime","green","teal","blue","purple"],c=e.dateHeadersStore,d=e.dateDataBidenAddDiffStore,h=e.dateDataTrumpAddDiffStore,a=c[t];var n={};n.label="Biden Gain/Loss",n.backgroundColor=r[0],n.borderColor=r[0],n.data=[],d[t].map(f=>{n.data.push(f)});let y=n;var i={};return i.label="Trump Gain/Loss",i.backgroundColor=r[1],i.borderColor=r[1],i.data=[],h[t].map(f=>{i.data.push(f)}),{labels:a,datasets:[y,i]}},_=(t,e=null)=>{e===null&&(e=b),console.log("entering updateChart with page no: ",t),document.getElementById("myChart").getContext("2d"),$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+t).css("background-color","#ffc107"),l.type;let r=E(e,t),c=r.labels,d=r.datasets,h=v.getChart("myChart");h.data.labels=c,d.forEach((a,n)=>{h.data.datasets[n].data=a.data}),h.update()};return X(Ce,{className:"chart-viewer",children:[s(C,{children:s(w,{className:"w-100 d-flex justify-content-center",children:s("h3",{children:l.selectedState})})}),s(C,{children:s(w,{className:"w-100 d-flex justify-content-center",children:s("h4",{children:"Difference Line Chart"})})}),s(Y,{handleCloseChart:l.handleCloseChart,...l,theResolutions:l.theResolutions,selectResolution:l.selectResolution,selectAnalytics:l.selectAnalytics,chartData:l.chartData,chartType:"DiffLineChart"}),s(C,{children:s(w,{className:"w-100 d-flex justify-content-center",children:s("h4",{children:"Increase/Decrease of Incremental Amount of Votes"})})}),s(C,{className:"d-flex justify-content-center",children:s("div",{children:s("canvas",{id:"myChart"})})}),s(C,{className:"h-100 p-1 mt-3 d-flex justify-content-center",children:s(G,{getPageNumber:z,type:"line",leftArrow:V,rightArrow:j,pageNo:g,thePagingArray:B,thePageSetNumber:m,chartData:b,thePageSize:x,theChartArray:I})})]})}export{_e as default};
