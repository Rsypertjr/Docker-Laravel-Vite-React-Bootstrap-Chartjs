import{r as i,j,a as r}from"./app-d3013fbc.js";import Z from"./ChartPager-13df2cce.js";import{C as A,A as H,a as q,L as M,B as O,P as W,b as G,c as J,D as K,d as Q,e as U,f as X,R as Y,S as ee,h as te,i as ae,j as le,k as se,T as ne,l as re,p as oe,m as ie,n as ce,o as de,q as ge,r as ue,I}from"./AnalyticsBar-7101e15f.js";import"./ResolutionDropdown-2d80e47b.js";import{C as he,R as m}from"./Row-50e19a91.js";import{C as N}from"./Col-2e73e1de.js";import"./Button-24cd0bf7.js";A.register(q,M,O,W,G,J,K,Q,U,X,Y,ee,te,ae,le,se,ne,re,oe,ie,ce,de,ge,ue);function Ne(a){const[R,E]=i.useState("");i.useState(null);const[d,g]=i.useState(a.pageNo),[h,S]=i.useState(parseInt(a.thePageSetNumber)),[y,me]=i.useState(a.thePageSize),[z,fe]=i.useState(a.thePagingArray),[B,pe]=i.useState(a.theChartArray),[f,D]=i.useState(a.chartData);i.useState(a.theVotes),i.useState(a.parse_resolution),i.useEffect(()=>{let t=document.getElementById("myChart").getContext("2d");$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+d).css("background-color","#ffc107");let e=a.type;a.pageNo;let l=f.dateHeadersStore[d-1],s="Votes from: "+l[0].replace(/T/g,"@").replace(/Z/g," ")+" to "+l[l.length-1].replace(/T/g,"@").replace(/Z/g," ");E(s);let u=T(f,d),o;I.modes.pointSelected=function(n,c,p,C){const b=[];o&&b.push(o);const x=I.modes.point(n,c,{intersect:!0},C);return x.length&&(o?b.push(...x.filter(F=>F.index!==o.index)):b.push(...x)),b};const P={id:"hl",afterEvent(n,c){c.event.type==="mouseout"&&o&&(n.setActiveElements([o]),n.tooltip.setActiveElements([o]),n.update())}},w=new A(t,{type:e,data:{labels:u.labels,datasets:[u.datasets]},options:{responsive:!1,interaction:{mode:"pointSelected",intersect:!0},onHover(n,c,p){const C=p.getElementsAtEventForMode(n,"point",{intersect:!0},!0);C.length&&(o=C[0])},plugins:{titleFont:{size:50},bodyFont:{size:40},footerFont:{size:40},tooltip:{titleFont:{size:20},bodyFont:{size:20},callbacks:{title(n){return n.map(c=>c.label).join(" and ")},label(n){return n.label+": "+n.formattedValue}}}}},plugins:[P]});return()=>{w.destroy()}},[]),i.useEffect(()=>{function t(){console.log("new chart data: ",a.chartData),D(a.chartData);let e;d===1||d===0?(e=1,g(e)):(e=d-1,g(e)),g(e),e>1&&_(e,a.chartData)}console.log("new parse res: ",a.parse_resolution),t()},[a.chartData]);const V=t=>{console.log("page num: ",t.num);let e=t.num;g(e),_(e,null)},k=t=>{console.log(t);let e=t.num;t.nxpagenum,t.type;let l=parseInt(h)*parseInt(y);console.log("highest page:",l),e>l&&(S(h+1),g(e))},L=t=>{console.log(t);let e=t.num,s=parseInt(h-1)*y+1;console.log("Lowest Page:",s),e!=0&&e<s?(S(h-1),g(e)):e==0&&s<=1&&(S(h),g(1))},T=(t,e,l,s)=>{if(e-1<t.bidenSlices.length)return v(e-1,t);{let u=t.bidenSlices.length-1;return v(u,t)}},v=(t,e)=>{let l=["red","orange","yellow","lime","green","teal","blue","purple"],s=e.dateHeadersStore[t],u=["Biden Votes","Trump Votes","Other Votes"],o="Votes from: "+s[0].replace(/T/g,"@").replace(/Z/g," ")+" to "+s[s.length-1].replace(/T/g,"@").replace(/Z/g," ");E(o);let P=e.bidenSlices[t],w=e.trumpSlices[t],n=e.otherSlices[t],c={label:o,data:[P,w,n],backgroundColor:[l[0],l[1],l[2]],borderColor:[l[0],l[1],l[2]],borderWidth:1};return{labels:u,datasets:c}},_=(t,e=null)=>{e===null&&(e=f),console.log("entering updateChart with page no: ",t),document.getElementById("myChart").getContext("2d"),$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+t).css("background-color","#ffc107"),a.type;let l=T(e,t);console.log("Pie Chart data: ",l);let s=A.getChart("myChart");s.data.labels=l.labels,s.data.datasets=[l.datasets],s.update()};return j(he,{className:"chart-viewer",children:[r(m,{children:r(N,{className:"w-100 d-flex justify-content-center",children:r("h3",{children:a.selectedState})})}),r(m,{children:r(N,{className:"w-100 d-flex justify-content-center",children:r("h4",{children:"Votes Pie Chart"})})}),r(H,{handleCloseChart:a.handleCloseChart,...a,theResolutions:a.theResolutions,selectResolution:a.selectResolution,selectAnalytics:a.selectAnalytics,chartData:a.chartData,chartType:"PieChart"}),r(m,{children:r(N,{className:"w-100 d-flex justify-content-center",children:r("h4",{children:R})})}),r(m,{className:"d-flex justify-content-center",children:r("canvas",{id:"myChart",className:"pie-chart",width:"400px",height:"400px",left:"300px"})}),r(m,{className:"w-100 p-1 mt-3",children:r(Z,{getPageNumber:V,type:"line",leftArrow:L,rightArrow:k,pageNo:d,thePagingArray:z,thePageSetNumber:h,chartData:f,thePageSize:y,theChartArray:B})})]})}export{Ne as default};
