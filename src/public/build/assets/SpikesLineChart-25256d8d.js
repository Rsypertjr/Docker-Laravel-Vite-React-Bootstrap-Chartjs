import{r as s,j as H,a as o}from"./app-33e0e813.js";import O from"./ChartPager-0ff13e40.js";import{C as N,g as Y,A as q,a as G,L as J,B as K,P as M,b as Q,c as U,D as Z,d as ee,e as te,f as ae,R as le,S as re,h as oe,i as se,j as ne,k as ce,T as de,l as ie,p as he,m as ge,n as ue,o as me,q as Ce,r as fe}from"./AnalyticsBar-62a31e14.js";import"./ResolutionDropdown-498d0d0b.js";/* empty css            */import{C as be,R as y}from"./Row-fb1f9ce4.js";import{C as D}from"./Col-c3c577e8.js";import"./Button-95edad04.js";N.register(G,J,K,M,Q,U,Z,ee,te,ae,le,re,oe,se,ne,ce,de,ie,he,ge,ue,me,Ce,fe);function Ne(l){s.useState(null);const[C,f]=s.useState(l.pageNo),[b,k]=s.useState(parseInt(l.thePageSetNumber)),[v,pe]=s.useState(l.thePageSize),[L,Se]=s.useState(l.thePagingArray),[I,ye]=s.useState(l.theChartArray),[A,F]=s.useState(l.chartData);s.useState(l.theVotes);const[z,Ae]=s.useState(l.parse_resolution);s.useEffect(()=>{console.log("Parse Resolution",z),console.log("Chart Data:",A);let t=document.getElementById("myChart").getContext("2d");$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+C).css("background-color","#ffc107");let e=l.type,r=T(A,C),c=r.labels,h=r.datasets;const g=new N(t,{type:e,data:{labels:c,datasets:h},options:{events:["mousemove","mouseout","click","touchstart","touchmove"],plugins:{tooltip:{events:["click"],position:"average",enabled:!0,interaction:{mode:"index",axis:"xy",intersect:"false"},titleFont:{size:35},bodyFont:{size:30},footerFont:{size:30}}},onHover:a=>{const p=Y(a),x=a.chart.scales.x.getValueForPixel(p.x),i=a.chart.scales.y.getValueForPixel(p.y);console.log("Data X",x),console.log("Data Y",i),console.log("Event",a),console.log("Active Elements: ",a.chart.tooltip.getActiveElements());let w=a.chart.chartArea.right-a.chart.chartArea.left;console.log("Chart start: ",a.chart.chartArea.left),console.log("Chart Width: ",w),console.log("Chart end: ",a.chart.chartArea.right);let u=parseFloat(a.chart.chartArea.right),E=parseFloat(a.chart.chartArea.left),d=(u-E)/11;console.log("Element width: ",d),console.log("Click X position: ",a.x);let S=0,n=parseFloat(a.chart.chartArea.left);for(;n<=a.chart.chartArea.right;){if(n<=a.x&&a.x<n+d){S++;break}n+=d,S++}console.log("Selected Index: ",S);let P=[],_;a.chart.data.datasets.map((m,X)=>{_={datasetIndex:X,index:S-1},P.push(_)}),console.log("Active Elements Array: ",P),a.chart.tooltip.setActiveElements(P,{x,y:i}),a.chart.update()}}});return()=>{g.destroy()}},[]),s.useEffect(()=>{$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+C).css("background-color","#ffc107")},[C]),s.useEffect(()=>{function t(){console.log("new chart data: ",l.chartData),F(l.chartData);let e;C===1?(e=1,f(e)):(e=C-1,f(e)),B(e,l.chartData)}console.log("new parse res: ",l.parse_resolution),t()},[l.chartData]);const V=t=>{console.log("page num: ",t.num);let e=t.num;f(e),B(e,null)},j=t=>{console.log(t);let e=t.num;t.nxpagenum,t.type;let r=parseInt(b)*parseInt(v);console.log("highest page:",r),e>r&&(k(b+1),f(e))},W=t=>{console.log(t);let e=t.num,c=parseInt(b-1)*v+1;console.log("Lowest Page:",c),e!=0&&e<c?(k(b-1),f(e)):e==0&&c<=1&&(k(b),f(1))},R=(t,e)=>{let r=["red","orange","yellow","lime","green","teal","blue","purple"],c=e.dateHeadersStore,h=e.dateDataBidenAddStore,g=e.dateDataTrumpAddStore,a=e.dateDataOtherAddStore,p=e.dateDataTotalAddStore,x=c[t];var i={};i.label="Biden Spike",i.backgroundColor=r[0],i.borderColor=r[0],i.data=[],h[t].map(m=>{i.data.push(m)});let w=i;var u={};u.label="Trump Spike",u.backgroundColor=r[1],u.borderColor=r[1],u.data=[],g[t].map(m=>{u.data.push(m)});let E=u;var d={};d.label="Other Spike",d.backgroundColor=r[2],d.borderColor=r[2],d.data=[],a[t].map(m=>{d.data.push(m)});let S=d;var n={};return n.label="Total Spike",n.backgroundColor=r[3],n.borderColor=r[3],n.data=[],p[t].map(m=>{n.data.push(m)}),{labels:x,datasets:[w,E,S,n]}},T=(t,e,r,c)=>{if(e-1<t.dateDataBidenAddStore.length)return R(e-1,t);{let h=t.dateDataBidenAddStore.length-1;return R(h,t)}},B=(t,e=null)=>{e===null&&(e=A),console.log("entering updateChart with page no: ",t),document.getElementById("myChart").getContext("2d"),$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+t).css("background-color","#ffc107"),l.type;let r=T(e,t),c=r.labels,h=r.datasets,g=N.getChart("myChart");g.data.labels=c,h.forEach((a,p)=>{g.data.datasets[p].data=a.data}),g.update()};return H(be,{className:"chart-viewer",children:[o(y,{children:o(D,{className:"w-100 d-flex justify-content-center",children:o("h3",{children:l.selectedState})})}),o(y,{children:o(D,{className:"w-100 d-flex justify-content-center",children:o("h4",{children:"Vote Spikes Line Chart"})})}),o(q,{handleCloseChart:l.handleCloseChart,...l,theResolutions:l.theResolutions,selectResolution:l.selectResolution,selectAnalytics:l.selectAnalytics,chartData:l.chartData,chartType:"SpikesLineChart"}),o(y,{children:o(D,{className:"w-100 d-flex justify-content-center",children:o("h4",{children:"Incremental Vote Spike (+/- from previous time) "})})}),o(y,{className:"d-flex justify-content-center canvas-holder",children:o("div",{children:o("canvas",{id:"myChart"})})}),o(y,{className:"h-100 p-1 mt-3 d-flex justify-content-center",children:o(O,{getPageNumber:V,type:"line",leftArrow:W,rightArrow:j,pageNo:C,thePagingArray:L,thePageSetNumber:b,chartData:A,thePageSize:v,theChartArray:I})})]})}export{Ne as default};
