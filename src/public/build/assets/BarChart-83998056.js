import{r as s,j as W,a as o}from"./app-d3013fbc.js";import X from"./ChartPager-13df2cce.js";import{C as D,g as H,A as O,a as Y,L as q,B as G,P as J,b as K,c as M,D as Q,d as U,e as Z,f as ee,R as te,S as ae,h as le,i as re,j as oe,k as se,T as ne,l as ce,p as ie,m as de,n as he,o as ge,q as ue,r as me}from"./AnalyticsBar-7101e15f.js";import"./ResolutionDropdown-2d80e47b.js";import{C as Ce,R as p}from"./Row-50e19a91.js";import{C as N}from"./Col-2e73e1de.js";import"./Button-24cd0bf7.js";D.register(Y,q,G,J,K,M,Q,U,Z,ee,te,ae,le,re,oe,se,ne,ce,ie,de,he,ge,ue,me);function Ne(l){s.useState(null);const[d,C]=s.useState(l.pageNo),[f,A]=s.useState(parseInt(l.thePageSetNumber)),[P,fe]=s.useState(l.thePageSize),[R,be]=s.useState(l.thePagingArray),[I,ye]=s.useState(l.theChartArray),[w,F]=s.useState(l.chartData);s.useState(l.theVotes),s.useState(l.parse_resolution),s.useEffect(()=>{let t=document.getElementById("myChart").getContext("2d");$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+d).css("background-color","#ffc107");let e=l.type,r=k(w,d),n=r.labels,h=r.datasets;const g=new D(t,{type:e,data:{labels:n,datasets:h},options:{events:["mousemove","mouseout","click","touchstart","touchmove"],plugins:{tooltip:{events:["click"],position:"average",enabled:!0,interaction:{mode:"index",axis:"xy",intersect:"false"},titleFont:{size:35},bodyFont:{size:30},footerFont:{size:30}}},onHover:a=>{const b=H(a),i=a.chart.scales.x.getValueForPixel(b.x),S=a.chart.scales.y.getValueForPixel(b.y);console.log("Data X",i),console.log("Data Y",S),console.log("Event",a),console.log("Active Elements: ",a.chart.tooltip.getActiveElements());let u=a.chart.chartArea.right-a.chart.chartArea.left;console.log("Chart start: ",a.chart.chartArea.left),console.log("Chart Width: ",u),console.log("Chart end: ",a.chart.chartArea.right);let v=parseFloat(a.chart.chartArea.right),m=parseFloat(a.chart.chartArea.left),x=(v-m)/11;console.log("Element width: ",x),console.log("Click X position: ",a.x);let y=0,c=parseFloat(a.chart.chartArea.left);for(;c<=a.chart.chartArea.right;){if(c<=a.x&&a.x<c+x){y++;break}c+=x,y++}console.log("Selected Index: ",y);let E=[],_;a.chart.data.datasets.map((pe,j)=>{_={datasetIndex:j,index:y-1},E.push(_)}),console.log("Active Elements Array: ",E),a.chart.tooltip.setActiveElements(E,{x:i,y:S}),a.chart.update()}}});return()=>{g.destroy()}},[]),s.useEffect(()=>{$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+d).css("background-color","#ffc107")},[d]),s.useEffect(()=>{function t(){console.log("new chart data: ",l.chartData),F(l.chartData);let e;d===1||d===0?(e=1,C(e)):(e=d-1,C(e)),C(e),T(e,l.chartData)}console.log("new parse res: ",l.parse_resolution),t()},[l.chartData]);const L=t=>{console.log("page num: ",t.num);let e=t.num;C(e),T(e,null)},V=t=>{console.log(t);let e=t.num;t.nxpagenum,t.type;let r=parseInt(f)*parseInt(P);console.log("highest page:",r),e>r&&(A(f+1),C(e))},z=t=>{console.log(t);let e=t.num,n=parseInt(f-1)*P+1;console.log("Lowest Page:",n),e!=0&&e<n?(A(f-1),C(e)):e==0&&n<=1&&(A(f),C(1))},k=(t,e,r,n)=>{if(e-1<t.dateDataBidenStore.length)return B(e-1,t);{let h=t.dateDataBidenStore.length-1;return B(h,t)}},B=(t,e)=>{let r=["red","orange","yellow","lime","green","teal","blue","purple"],n=e.dateHeadersStore,h=e.dateDataBidenStore,g=e.dateDataOtherStore,a=e.dateDataTrumpStore,b=n[t];var i={};i.label="Biden Votes",i.backgroundColor=r[0],i.borderColor=r[0],i.data=[],h[t].map(c=>{i.data.push(c)});let S=i;var u={};u.label="Trump Votes",u.backgroundColor=r[1],u.borderColor=r[1],u.data=[],a[t].map(c=>{u.data.push(c)});let v=u;var m={};return m.label="Other Votes",m.backgroundColor=r[3],m.borderColor=r[3],m.data=[],g[t].map(c=>{m.data.push(c)}),{labels:b,datasets:[S,v,m]}},T=(t,e=null)=>{e===null&&(e=w),console.log("entering updateChart with page no: ",t),document.getElementById("myChart").getContext("2d"),$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+t).css("background-color","#ffc107"),l.type;let r=k(e,t),n=r.labels,h=r.datasets,g=D.getChart("myChart");g.data.labels=n,h.forEach((a,b)=>{g.data.datasets[b].data=a.data}),g.update()};return W(Ce,{className:"chart-viewer",children:[o(p,{children:o(N,{className:"w-100 d-flex justify-content-center",children:o("h3",{children:l.selectedState})})}),o(p,{children:o(N,{className:"w-100 d-flex justify-content-center",children:o("h4",{children:"Total Votes Bar Chart"})})}),o(O,{handleCloseChart:l.handleCloseChart,...l,theResolutions:l.theResolutions,selectResolution:l.selectResolution,selectAnalytics:l.selectAnalytics,chartData:l.chartData,chartType:"BarChart"}),o(p,{children:o(N,{className:"w-100 d-flex justify-content-center",children:o("h4",{children:"Incremental Total Votes"})})}),o(p,{className:"d-flex justify-content-center",children:o("canvas",{id:"myChart"})}),o(p,{className:"h-100 p-1 mt-3 d-flex justify-content-center",children:o(X,{getPageNumber:L,type:"line",leftArrow:z,rightArrow:V,pageNo:d,thePagingArray:R,thePageSetNumber:f,chartData:w,thePageSize:P,theChartArray:I})})]})}export{Ne as default};
