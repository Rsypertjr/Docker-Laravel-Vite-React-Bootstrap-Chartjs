import{r as s,j as X,a as o}from"./app-33e0e813.js";import H from"./ChartPager-0ff13e40.js";import{C as N,g as O,A as Y,a as q,L as G,B as J,P as K,b as M,c as Q,D as U,d as Z,e as ee,f as te,R as ae,S as le,h as re,i as oe,j as se,k as ne,T as ce,l as ie,p as de,m as he,n as ge,o as ue,q as me,r as Ce}from"./AnalyticsBar-62a31e14.js";import"./ResolutionDropdown-498d0d0b.js";import{C as fe,R as p}from"./Row-fb1f9ce4.js";import{C as D}from"./Col-c3c577e8.js";/* empty css            */import"./Button-95edad04.js";N.register(q,G,J,K,M,Q,U,Z,ee,te,ae,le,re,oe,se,ne,ce,ie,de,he,ge,ue,me,Ce);function Re(l){s.useState(null);const[m,C]=s.useState(l.pageNo),[f,P]=s.useState(parseInt(l.thePageSetNumber)),[w,be]=s.useState(l.thePageSize),[B,ye]=s.useState(l.thePagingArray),[L,pe]=s.useState(l.theChartArray),[S,I]=s.useState(l.chartData);s.useState(l.theVotes);const[V,Se]=s.useState(l.parse_resolution);s.useEffect(()=>{console.log("Parse Resolution",V),console.log("Chart Data:",S);let t=document.getElementById("myChart").getContext("2d");$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+m).css("background-color","#ffc107");let e=l.type,r=R(S,m),n=r.labels,d=r.datasets;const h=new N(t,{type:e,data:{labels:n,datasets:d},options:{events:["mousemove","mouseout","click","touchstart","touchmove"],plugins:{tooltip:{events:["click"],position:"average",enabled:!0,interaction:{mode:"index",axis:"xy",intersect:"false"},titleFont:{size:35},bodyFont:{size:30},footerFont:{size:30}}},onHover:a=>{const b=O(a),i=a.chart.scales.x.getValueForPixel(b.x),x=a.chart.scales.y.getValueForPixel(b.y);console.log("Data X",i),console.log("Data Y",x),console.log("Event",a),console.log("Active Elements: ",a.chart.tooltip.getActiveElements());let g=a.chart.chartArea.right-a.chart.chartArea.left;console.log("Chart start: ",a.chart.chartArea.left),console.log("Chart Width: ",g),console.log("Chart end: ",a.chart.chartArea.right);let v=parseFloat(a.chart.chartArea.right),u=parseFloat(a.chart.chartArea.left),A=(v-u)/11;console.log("Element width: ",A),console.log("Click X position: ",a.x);let y=0,c=parseFloat(a.chart.chartArea.left);for(;c<=a.chart.chartArea.right;){if(c<=a.x&&a.x<c+A){y++;break}c+=A,y++}console.log("Selected Index: ",y);let E=[],_;a.chart.data.datasets.map((xe,W)=>{_={datasetIndex:W,index:y-1},E.push(_)}),console.log("Active Elements Array: ",E),a.chart.tooltip.setActiveElements(E,{x:i,y:x}),a.chart.update()}}});return()=>{h.destroy()}},[]),s.useEffect(()=>{$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+m).css("background-color","#ffc107")},[m]),s.useEffect(()=>{function t(){console.log("new chart data: ",l.chartData),I(l.chartData);let e;m===1?(e=1,C(e)):(e=m-1,C(e)),T(e,l.chartData)}console.log("new parse res: ",l.parse_resolution),t()},[l.chartData]);const F=t=>{console.log("page num: ",t.num);let e=t.num;C(e),T(e,null)},z=t=>{console.log(t);let e=t.num;t.nxpagenum,t.type;let r=parseInt(f)*parseInt(w);console.log("highest page:",r),e>r&&(P(f+1),C(e))},j=t=>{console.log(t);let e=t.num,n=parseInt(f-1)*w+1;console.log("Lowest Page:",n),e!=0&&e<n?(P(f-1),C(e)):e==0&&n<=1&&(P(f),C(1))},k=(t,e)=>{let r=["red","orange","yellow","lime","green","teal","blue","purple"],n=e.dateHeadersStore,d=e.dateDataBidenStore,h=e.dateDataTrumpStore,a=e.dateDataOtherStore,b=n[t];var i={};i.label="Biden Votes",i.backgroundColor=r[0],i.borderColor=r[0],i.data=[],d[t].map(c=>{i.data.push(c)});let x=i;var g={};g.label="Trump Votes",g.backgroundColor=r[1],g.borderColor=r[1],g.data=[],h[t].map(c=>{g.data.push(c)});let v=g;var u={};return u.label="Other Votes",u.backgroundColor=r[2],u.borderColor=r[2],u.data=[],a[t].map(c=>{u.data.push(c)}),{labels:b,datasets:[x,v,u]}},R=(t,e,r,n)=>{if(e-1<t.dateDataBidenStore.length)return k(e-1,t);{let d=t.dateDataBidenStore.length-1;return k(d,t)}},T=(t,e=null)=>{e===null&&(e=S),console.log("entering updateChart with page no: ",t),document.getElementById("myChart").getContext("2d"),$(".page").css("background-color","rgb(239, 239, 239").css("border-color","rgb(255, 255, 255").css("border-width","3px"),$("#page-"+t).css("background-color","#ffc107"),l.type;let r=R(e,t),n=r.labels,d=r.datasets,h=N.getChart("myChart");h.data.labels=n,d.forEach((a,b)=>{h.data.datasets[b].data=a.data}),h.update()};return X(fe,{className:"chart-viewer",children:[o(p,{children:o(D,{className:"w-100 d-flex justify-content-center",children:o("h3",{children:l.selectedState})})}),o(p,{children:o(D,{className:"w-100 d-flex justify-content-center",children:o("h4",{children:"Total Votes Line Chart"})})}),o(Y,{handleCloseChart:l.handleCloseChart,...l,theResolutions:l.theResolutions,selectResolution:l.selectResolution,selectAnalytics:l.selectAnalytics,chartData:l.chartData,chartType:"VotesLineChart2"}),o(p,{children:o(D,{className:"w-100 d-flex justify-content-center",children:o("h4",{children:"Incremental Total Votes"})})}),o(p,{className:"d-flex justify-content-center",children:o("div",{children:o("canvas",{id:"myChart"})})}),o(p,{className:"h-100 p-1 mt-3 d-flex justify-content-center",children:o(H,{getPageNumber:F,type:"line",leftArrow:j,rightArrow:z,pageNo:m,thePagingArray:B,thePageSetNumber:f,chartData:S,thePageSize:w,theChartArray:L})})]})}export{Re as default};
